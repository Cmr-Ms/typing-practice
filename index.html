<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>実用入力練習</title>
  <style>
    body{
      color: rgb(0, 255, 0);
      background: black;
    }
    #mainframe{
      text-align: center;
      
    }
    #sentencearea{
      font-size: 30px;
    }
    #nextsentence{
      font-size: 20px;
    }
    #typearea{
      font-size: 22px;
    }
    #wordsarea{
      font-size: 20px;
    }
    select{
      font-size: 20px;
    }
    textarea{
      background: black;
      color: rgb(0, 255, 0)
    }
    button{
      font-size: 30px;
    }
    input[type="number"]{
      font-size: 30px;
    }
  </style>
</head>
<body>
<!-- partial:index.partial.html -->
<div id="mainframe">
  <a id="sentencearea"></a><br>
  <a id="nextsentence"></a><br>
  <textarea id="typearea" rows=5 cols="50" autofocus placeholder="ここに上の文を入力して開始"></textarea><br>
  <a id="status"></a><br>
  <a id="countdown"></a><br>
  <textarea id="wordsarea" rows="5" cols=50 placeholder="ここにワードを改行区切りで入力">うまい果実ほど木の一番上にある
走らなければ競争に勝てない
もっと自信持っていけよ
元気が出ない日は、元気のいらない日
失敗したって恥じゃない
いやな仕事は朝やろう
雨だっていつかやむ
自分にとってのゴールを持て
大丈夫、独りじゃないよ
言い訳考えるより前に進め
自らを疑えば何もできなくなる
夢を追いかけるのは苦しくて楽しい
ほら、できたじゃない
自分流なのは自分に合っているから
小さな勇気をもとう
これで完璧なんてないものさ
夢は叶えるために見るんだ
もう少しがんばれそうだ
勇気を君がくれた
思い切って勇気を出そう
最初からプロはいない
自分のために
やってよかったことは多いもの
時間は平等にある
始めから完成とはいえない
運とは君の勇気のことだ
無理しないで自分らしく
応援するよ
不安なんて気分だけさ
自分の可能性を信じよう
ほめられるのは嬉しいね
目的地があるから辿り着ける
何が起きるか心配しても仕方がない
人はできる以上のことができるものだ
くよくよしたって始まらない
あせる気持ちに負けるな
常に最善を尽くせ
持てる才能を生かせばいい
夢のようだ
可能性は平等にある
少しだけ余計に毎日続けよう
成功したときの事を思い出そう
悩むより、前に進め
信じる心が力になる
笑顔はみんなを幸せにする
一緒にがんばろうよ
まだまだ君はその程度じゃない
何ができるかやらずにはわからない
はじめはチャレンジャー
変えたい気持ちが勇気を生む
失敗の数が最高の経歴だ
そんなあなたが好き
本当についてる
初め良ければ、終わりよし
自信は才能ではない
空は広いだろ
いいとこを探そう
いやなことから片づけよう
変わらなければ
すべては自分次第
いつも元気をありがとう
あしたがわかれば、つまらない
努力するほど悩むものさ
できると嬉しいんだ
笑顔は伝染する
マイペースでいいんだよ
みんながいたからがんばれた
自分のために生きよう
難しく考えるな
自分が好きなことをやろう
もっと自信もてよ
決められた人生なんてないんだ
傍観者でいいのか
無理したって仕方ないよ
できないからやりがいなんだよ
これからできるようになればいい
プラス思考でいこう
誰かがやらねば何も変わらない
前向きに考えよう
悩むより、まずやってみよう
自分はついてる
きっとできるって信じること
やさしくされるとやさしくなれる
何事もやらずにできることはない
単純化すれば答えが見える
勇気ある行動ができる
大丈夫、それでいいんだよ
苦手なことからやろう
君を信頼しているよ
がんばろうね
成功したい気持ちが成功に導く
休むことも大事だよ
悪い予感はさぼりたい口実
失敗ぐらいなんだ
ついてるって毎日言おう
情熱があれば道は開く
どん底を見ておいてよかったな
信じることから始めよう
君ならできる
自分の速さでいけばいい
君と出会えてよかった
比べなくたって自分は自分
諦めないから叶うのです
目標は高く持て
ゴールへの道は一つじゃない
できるはずさ
必ず道はある
退屈がいやだったのは自分のはず
最初の一歩がないと始まらないよ
苦労があるから喜びもある
大丈夫だよ
一度きりの人生なら、やるしかないか
自信は最後に生まれる
歩いているから蹴躓くこともある
最初は誰でも緊張する
ちょっと我慢するといいことあるよ
がんばってね
今苦しいのは幸せを感じるため
戦わずして勝利はない
できたら面白いぞ
できると信じるからできる
自分を安売りするな
気は持ちようって言うじゃない
あなたはあなた
答えは身近にあるものだ
君ならやれそうだ
小さな勇気だけだ
やってみて初めてわかることもある
まず自分が変わろう
がんばれよ応援するよ
君は君なんだから
毎日毎日をきちんと終わろう
また晴れるさ
後から後悔したってもう遅い
僕もがんばるよ
勇気をだそう
上を向いて歩こう
最高の栄養剤は君の笑顔だ
自らの夢に自信をもて
大丈夫、きっとうまくいく
好きなことなら続けられる
夢見る大人でいいじゃない
情熱が自分を後押しする
夢をめざすとき、道は開かれる
前髪を切るだけで気分って変わる
おはよう元気かい
君には夢がある
勇気がわいてくる
君ならできるはずだ
空元気も本物になる
諦めることが最大の敗北だ
勇気って自分にもあるんだ
勝ちたいから勝てる
自分一人じゃないはずだ
自分次第で楽しくも苦しくもできる
自信は自分で作れる
希望は最悪の結果から生まれる
大人だって子供
分かってくれる人がいるはず
泣いて、怒って、また笑えばいい
情熱があればできないことはない
高い山ほど登り甲斐がある
誰も分かってくれないなら、天才かもね
夢があればなんとかなるさ
あと少しがんばろう
君には決める自由がある
考える力が人間の偉大さだ
自分が変われば環境も変わる
スタートに年齢制限はない
きっとなんとかなる
考え抜けば解決できる
まだまだ人生これから
だんだん主義でいこう
少しの勇気が大事なのだ
信じるものに不可能はない
元気な顔してるね
飛び上がるほど嬉しい
過ちを恐れるな
何がなんでもやりとおせ
努力はしただけ報われる
歩幅はみんな違うんだよ
大丈夫、心配しないで
元気の素は身近にある
自分でやらずに他人に頼るな
見る目ないヤツが多すぎるね
自分の弱さに負けるな
誰かではなく責任は常に自分にある
始めてみようよ
君は独りじゃない
それでいい
たまには気分転換も必要だよ
情熱はいまも変わらない
始めないと進まないよ
君の笑顔はいいね
人の心が世界を変える
十年後が見えてたらつまんないだろ
きっと夢は叶う
チャンスは必ずやって来る
目を見て話すようにしよう
また挑戦すればいい
変化は怖くない
小さな仕事にもベストを尽くせ
苦しい時に安売りするな
悲観論が勝利することはない
どうせならでっかく考えよう
壁を乗り越える
みんなに可能性はある
プラス思考で考えよう
勇気は自分で作れる
まだまだこれからじゃないか
まだ諦めるな
楽しいことを考えよう
自分を見失わず判断していこう
どんな失敗にも対処法はある
もう一度挑戦することだ
いいとこ探ししよう
必ず道は開ける
失敗に学び未来を作れ
やるだけやったら満足できるよ
元気だそうぜ
まずは踏み出そうよ
ちょっとずつちょっとずつ
絶対あきらめない
葉っぱに水をあげたら元気でた
自分自身をさらけだせ
夢の実現に年齢制限はない
生きてるって実感するとき
夢見る大人になろう
僕らは夢を見続ける
大切なものは失ってから気づく
毎日一回ありがとうを言おう
自らの行動で人生を切り開く
自信あふれるとき輝いている
最初からできない言い訳をするな
走るときもある、歩くときもある
負けは認めるまで負けではない
あなたならできそうな気がする
挑戦だよ何だって
何度でもやり直せばいい
期待してるよ
また最初から始めればいい
努力の中に快楽を見つけろ
もう少しだけがんばろうよ
ほめ上手になろう
毎日ひとついいとこ探そう
夢を話そう
前向きに考えれば早い
変革を起こそう
シンプルに、よりシンプルにせよ
自ら楽しんでいるか
若者よ、苦労は買ってでもしろ
誰にでも間違いはあるよ
反省は２秒でいい
失敗する日もある、うまくいく日もある
希望を捨てないで
フシアワセぶってるだけなのかもね
可能性は誰にでもある
目標を貫き通せ
君らしくやるだけだ
朝の来ない夜はない
最近、笑っていますか
夢をあきらめない
いつも元気だな
守ろうとすれば苦しいだけ
今の幸せに目を向けなさい
もうあきらめるの
独りで悩まず相談しよう
あなたの笑顔に会えたから
なんとかなるさ
落ち着いて
長い夜でも朝は来る
未来は作っていくもの
小さな事にも最善をつくせ
みんながやりたくないことをやろう
空を見上げてみよう
人は思っているより強いものだ
案外できるものだよ
好機は自分の中にある
君の笑顔には勝てないな
宝くじより、アナタを頼ります
信じることから始めないか
君次第だよ
大きな声で話そう
なりたい自分になれる
人生の目標を持て
できるって信じよう
大きな夢
勝つことを信じないと勝てないよ
始めるのに遅すぎることはない
背伸びしない自分の背丈で考えろ
自分らしく
やりたいことはできる
さすが君だ
幸せを決めるのも自分だよ
一緒にがんばろうね
人生一度チャンスは今
心配して損したってことばかりだ
一にも二にも行動
今日ほめられた
元気な声で挨拶をしよう
勇気をおこせ
小さな幸せを数えてみよう
最初の一歩は小さな勇気
自らの想いを実現せよ
成功は地道な仕事から
焦ったってしょうがないさ
やめるのはいつでもできる
誰だってそうだよ
たくさん話そう
ひとつだけ得意技をつくろう
答えは問題の中にある
笑顔でいると元気になれる
始めないと始まらない
望みを叶えるのも自分自身
はっきりと話そう
無理しなくていいんだよ
もう少しがんばれそうだな
倒れてもまた立ち上がればいい
いつか雨もあがるさ
ちっちゃくなるなよ
知らないことのほうが多い
考える仕事は朝やろう
回り道すれば視野が拡がる
大声で笑おうよ
自分に遠慮するな
苦手が得意に変わると強い
自分がどうなりたいかが大切
自分流でいこう
自分流でいいんだよ
やらなければ始まらないだろ
すごくいいよ
道に迷ったら戻ればいい
自分自身に期待しよう
始まりに遅すぎはない
ゴールは見えてるよ
強がりもいいじゃない
まあまあ、それくらい、なんでもない
暗闇を恐れるな明かりを灯せ
いいじゃない、失敗したって
苦労や失敗は自信の裏付けだ
徹底的に考え、徹底的に攻めろ
楽しめるかどうかがポイント
成功の保証なんてなくてあたりまえ
もっと高く飛べるはず
目を見て話そう
そらをみあげて
たくさん笑おう
失敗を恐れなければ勝てる
幸せは一人一人違うものだ
遠回りしていこう
陽気でいよう
夢に自信はあるか
肩の力抜いてみなよ
勇気は自分の中にある
過去の不幸は忘れよう
不可能に挑戦しよう
ついてるのは偶然じゃない
目標を明確にイメージしよう
悩むなら前に進もう
夢を安売りするな
自分を好きになろう
勝てる、そう思わないか
君なら大丈夫だ
のんびりいこうよ
約束された未来なんてないさ
みんなに夢を話そう
まずは一歩目からだよ
疲れた気持ちじゃ続かないよ
遊びながら考え実行する
できないよって言われたからやるんだ
強くなるために生きる
できるって信じてるだろ
感謝の心を忘れるな
けっこう自分もやるな
自分流を見つけよう
さあ始めよう
楽しいを見つけよう
常にプラス思考でいこう
小さな仕事ほど丁寧に
苦労なくして成功はない
心に太陽をもとう
当たって砕けろ
挑戦することをやめるのか
足下の幸せに気づいているか
君には無限の可能性がある
夢は叶う
そろそろやってみようか
失敗することを恐れない
楽しいと感じていますか
不安に負けるな
自分ペースでいこう
たまには息抜きしよう
勝てると信じる人は勝者になれる
気力は実力を超える
青空って気持ちいいね
足下の幸せを大切にしよう
やればできる
苦しいときこそ笑顔を絶やすな
可能性に終わりはない
運命にまかせるな
失敗を重ねれば強くなれる
もう少しがんばるよ
いつでも相談しろよ
過ちを恐れることが過ちである
どうなりたいか考えよう
いつもがんばってるね
最初の一歩は勇気
やる気だね
ワクワクする
目に見える景色だけにとらわれるな
失敗は恥じゃない
自分は自分だろ
天気のいい日はいいことあるよ
望みは高く持とう
諦めるまでは敗者ではない
自分の力で手に入れろ
人間はすごい、考える力がある
トライ・アンド・エラー
自分流なら楽になれる
できるようになっていけばいい
実行する勇気をもとう
ダメな子だから、がんばれる
人は可能性の生き物
努力した分報われる
陽気にいこう
わかりやすく話そう
夜明け前が一番暗いんだよ
単純化して考えよう
やらずにできるわけがない
失敗ぐらいで人生は決まらない
君の努力を見てる人がいる
自分から踏み込んでいけ
できることから始める
とってもうれしい
晴れでも雨でも、楽しむ人がいる
イヤな予感はアテにならない
限界を感じても進める道は必ずある
今が大切
失敗から学べばいい
天気のいい日はいいことありそうだ
仕事の中に楽しいを見つけよう
情熱があれば不可能はない
笑顔でいれば怖くない
夢を実現するのは君自身だ
君の信じるようにやればいい
誰かいてくれるし、誰か見てくれてる
失敗して得したね
誰だって最初からプロじゃない
もう一度挑戦しよう
いやなことからやろう
勝てる気がする
勇気はやがて力になる
不可能はない必ず道がある
人生楽しまなくちゃ損だよ
思いついたら、必ず実行してみる
仕事を楽しく出来るかは自分次第
自分の強さを信じてる
自分サイズでいいじゃない
まだ間に合うさ
もう一歩、あと一歩
他人の目で自分を見てみよう
できそうもないことをやろう
あと少しじゃないか
雨上がりには虹が見えるだろ
チャンスは貯めておけない
他人にはわからなくてあたりまえ
がんばれる自分がいる
悩むより考えろ
自信を持って大丈夫だよ
自分ならやれる
あなたがいてくれたから
ゴールがどこか見えてるか
新しい未来を作ろう
ひとりきりで考えるなよ
スタートの時期に遅すぎはない
冒険することに価値がある
毎日ちょっとずつでいい
応援してるよ
毎日ひとつ新しいことをやろう
あなたの人生、あなたが主役
疲れたら休もうよ
誰だって一歩目から始める
計画は悲観的に行動は楽観的に
１０分早く家を出よう
ファイト一発
無理しない無理しない
元気でいるだけで運が集まる
運がいいって思わないか
仲間がいるからがんばれる
努力無くして夢はかなわない
みんなががんばってるんだ
風がなければ、漕げ
世の中だってまちがいだらけだよ
戦わずして勝利無し
変革を起こせ
いつまでも曇りじゃないさ
自分の視野は自分で拡げるものだ
自信とは作るものだ
すてきなところを見つけてね
まず、どう生きたいのか考えろ
できる気がする
勝利への道も最初の一歩からだ
前向きな態度
チャンスの扉は自分で開けろ</textarea><br>
  <input id="seconds" type="number" value="60" onchange="seconds=Number(this.value);reset()">
  <label>秒</label>
  <input id="longwordmode" type="checkbox" onclick="allwords=wordsarea.value.split(RegExp(`\\n{${1+this.checked},}`)).filter(e=>Boolean(e))"><label>長文モード</label><br>
  <button onclick="reset()">リセット</button>
</div>
<!-- partial -->
  <script>
        const sentencearea = document.querySelector("#sentencearea");
    const nextsentence = document.querySelector("#nextsentence")
    const typearea = document.querySelector("#typearea");
    const status = document.querySelector("#status");
    const wordsarea = document.querySelector("#wordsarea");
    const longwordmode = document.querySelector("#longwordmode")
    const countdown = document.querySelector("#countdown")
    const timerseconds = document.querySelector("#seconds")
    function reset(){
      wordtotype = "";
      multilineword = []
      nextword = ""
      typearea.value=""
      typedchars = 0;
      started = false
      starttime = 0
      endtime = 0
      seconds = Number(timerseconds.value)
      countdown.innerText = `残り ${seconds} 秒`
      changeword()
      clearTimeout(timer)
      clearInterval(countdowntimer)
    }

    function changeword(){
      status.innerText = typedchars + " 文字";
      multilineword.push(...allwords[Math.floor(allwords.length * Math.random())].split("\n"))
      wordtotype = multilineword[0]
      if(!multilineword[1]){
        multilineword.push(...allwords[Math.floor(allwords.length * Math.random())].split("\n"))
      }
      nextword = multilineword[1]
      multilineword = multilineword.slice(1)
      sentencearea.innerText = wordtotype
      nextsentence.innerHTML = "<b>次: </b>"+nextword
      typearea.value = "";
      typearea.style["background-color"] = "rgb(0, 0, 0)"
    }
    window.onload = ()=>{
      //allwords=wordsarea.value.split("\n"+"\n".repeat(longwordmode.checked)).filter(e=>Boolean(e))
      allwords=wordsarea.value.split(RegExp(`\\n{${1+longwordmode.checked},}`)).filter(e=>Boolean(e))
      reset()
    }
    wordsarea.addEventListener("input", (e)=>{
      //allwords=wordsarea.value.split("\n"+"\n".repeat(longwordmode.checked)).filter(e=>Boolean(e))
      allwords=wordsarea.value.split(RegExp(`\\n{${1+longwordmode.checked},}`)).filter(e=>Boolean(e))
      reset();
    })

    typearea.addEventListener("input", (e)=>{
      //console.log(e.inputType, e.data)
      if(!started && /./.test(typearea.value)){
        started = true
        starttime = Date.now()
        endtime = starttime + 1000*seconds
        timer = setTimeout(
          ()=>{
            if(typearea.value){
              try{
                typedchars += wordtotype.match(new RegExp("(\\"+typearea.value.split("").join(")?(\\")+")?", "g")).join("").length
              }catch{}
            }
            clearInterval(countdowntimer)
            alert(typedchars+"文字");console.log(typedchars);document.title = `${typedchars}文字 - 実用入力練習`
            reset()
          }, endtime - starttime
        )
        countdowntimer = setInterval(
          ()=>{
            countdown.innerText = `残り ${(endtime - Date.now()) / 1000} 秒`
          }, 100
        )

      }
      if((e.inputType === "insertLineBreak" || (e.inputType === "insertText" && (!e.data || e.data ===  "\n"))) && typearea.value.replace(RegExp(`(?<=${wordtotype})(\n)`), "") === wordtotype){
        typedchars += typearea.value.length
        changeword()
      }
      else if(wordtotype.startsWith(typearea.value) && typearea.value){
        typearea.style["background-color"] = "rgb(0, 100, 0)"
      }else if(!wordtotype.startsWith(typearea.value) && typearea.value){
        typearea.style["background-color"] = "rgb(100, 0, 0)"
      }else{
        typearea.style["background-color"] = "rgb(0, 0, 0)"
      }
    })

    typearea.addEventListener("keydown", (e)=>{
      if(e.key === "Escape"){
        reset()
        try{
          clearTimeout(timer)
        }catch(e){}
      }
    })

    /*typearea.addEventListener("keyup", (e)=>{
      if(typearea.value === "\n" && e.key==="Enter"){
        typearea.value = "";
      }
    })*/
  </script>

</body>
</html>
