<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>実用入力練習</title>
  <meta name="description" content="変換ありのタイピング練習ができます。">
  <meta name="keywords" content="タイピング, 実用入力, 変換, タイピング練習">
  <style>
    body{
      color: rgb(0, 255, 0);
      background: black;
    }
    #mainframe{
      text-align: center;
      width: 100%;
      height: 70%;
      
    }
    #sentencearea{
      font-size: 32px;
      background: rgb(0, 50, 0);
    }
    #nextsentence{
      font-size: 24px;
      background: rgb(0, 50, 0);
    }
    #typearea{
      font-size: 22px;
      width: 800px;
      height: 100px;
    }
    #wordsarea{
      font-size: 20px;
      width: 600px;
      height: 100px;
    }
    select{
      font-size: 20px;
    }
    textarea{
      background: black;
      color: rgb(0, 255, 0);
      font-size: 32px;
    }
    button{
      font-size: 30px;
    }
    input[type="number"]{
      font-size: 30px;
    }
  </style>
</head>
<body>
<div id="mainframe">
  <a id="sentencearea"></a><br>
  <a id="nextsentence"></a><br>
  <textarea id="typearea" autofocus placeholder="一番上の文を入力するとカウントダウンが始まります。改行した時点で1文字以上正解の文字があると次のワードに切り替わります(完全に正解の場合は改行も文字数にカウントされます)"></textarea><br>
  <a id="progress"></a><br>
  <a id="countdown"></a><br>
  <textarea id="wordsarea" placeholder="改行区切りでワードを入力  長文モードを使う場合はワードの分け目に改行を2つ入れてください"></textarea><br>
  <input id="seconds" type="number" value="60" onchange="seconds=Number(this.value);reset()">
  <label>秒</label>
  <input id="longwordmode" type="checkbox" checked onclick="allwords=wordsarea.value.split('\n\n').filter(e=>Boolean(e));reset()"><label>長文モード</label>
  <input id="wordsmode" type="checkbox" onchange="reset()">
  <label>ワード数モード</label><br>
  <input id="until_words" type="number" value="10" onchange="until_words=Number(this.value);allwords=wordsarea.value.split('\n'.repeat(1+longwordmode.checked)).filter(e=>Boolean(e));reset()">
  <label>ワード</label><br>
  <button onclick="reset()">リセット</button><br>
  <a href="https://github.com/Cmr-Ms/typing-practice/tree/main" target="_blank">追加のワード  はこちらから</a><br>
  <a href="https://forms.gle/5AfvtdjJMF1s87c49" target="_blank">ご意見などはこちらから</a>
</div>

  <script>
    store_words = [`通常国会とは？　予算や法律をつくる\n　１月２３日に通常国会が始まりました。テレビ中継などで、国会の様子を目や耳にする機会が増えるかもしれません。どんなことを議論しているのでしょう。国会の仕組みをくわしく見てみましょう。\n　国会を開くことを召集といい、開かれている期間を会期といいます。会期のはじめに天皇陛下をお迎えして、参議院本会議場で開会式があります。衆議院で行われないのは、天皇のお席などが、参議院にしかないためです。\n　第二次世界大戦が終わって今の憲法が施行されるまで、参議院は「貴族院」と呼ばれていました。皇族や華族（貴族階級の人）が議員だったので、皇族などのための設備があるのです。\n　開会式では、天皇陛下からおことばがありました。最近の開会式と同じく、「『国権の最高機関』として、その使命を十分に果たし、国民の信託に応えることを切に希望します」と話しました。どういうことでしょう。\n　日本は、国が暴走しないように権力を三つに分けています。「法律をつくる力（立法権）」「法律に基づいて政治を行う力（行政権）」「法律によって争いを収める力（司法権）」です。それぞれ国会、内閣、裁判所が担当しています。\n　このうち国会は、日本国憲法で「国権の最高機関」と定められています。三権の中で一番偉いというわけではありません。民主主義の国で、主役は国民です。その国民が選挙で選んだ代表が集まる場なので「最高機関」と位置づけ、憲法がうたう「国民主権」を強調しています。\n　実際には、国会、内閣、裁判所は「三権分立」といって、お互いをチェックし合っています。権力が乱用されないようバランスをとっています。\n　国会の主な仕事は、国民から集めた税金の使い方（予算）を決めたり、法律をつくったりすることです。国会議員は、政府や自分たちが提出した予算や法律の案（予算案や法案といいます）について、よりよい予算や法律にならないか、それともやめるかなどを話し合います。\n　国会には衆議院と参議院の２院がありますが、これは一方の議院の行き過ぎを防ぐためです。両方の議院での審議を経て、多数決で賛成が多ければ、予算や法律は成立します。\n　また国会には、内閣を監視する役割もあります。昨年秋の臨時国会では、宗教団体との関係や政治資金の使い方について、複数の大臣が国会議員から厳しい追及を受けていました。こうしたことが監視の一つのやり方です。\n　国会には通常、臨時、特別の３種類があります。通常国会は憲法と法律で年１回、１５０日開くと定められています。今回は１月２３日に開会したので、６月２１日までです。１回に限り、延長することができます。\n　臨時国会は内閣が必要と判断した時、年に何回でも開くことができます。または衆議院か参議院の総議員の４分の１以上の要求があった場合も開かなければいけません。特別国会は衆議院選挙後に開かれ、改めて総理大臣を指名するものです。\n　今年の通常国会では、歳出規模が過去最大の１１４兆円となった新年度予算案などが審議されます。政府が昨年末に決めた、「反撃能力」（敵基地攻撃能力）を持つことがいいかどうかや、少子化対策も議論されそうです。\n\n太陽を監視、警報制度整備　カーナビにも影響「宇宙天気」\n　みんなは、遠足や旅行の日が近づくと「晴れるといいな」と考えて、テレビや新聞が伝える天気予報を気にしているかな。地球だけでなく、宇宙にも天気予報のような仕組みが整えられつつあります。\n　地球の周りの宇宙空間の天気を左右しているのは太陽です。晴れた日が暖かいのは、地球まで太陽の熱が届いているためですが、同時にとても小さな電気を帯びた粒子、けがをしたときの検査に使われる放射線も到来しています。\n　粒子が、地球の大気に飛び込んで発生する自然現象の一つが、北極や南極の上空を美しく彩るオーロラです。私たちに感動を与え、その地域の観光に欠かせない存在ですね。\n　一方で、悪さもします。太陽の表面では「太陽フレア」という爆発現象が起きていますが、時々、とても規模の大きな爆発があります。すると、私たちの体に害を与えかねない強い放射線が生じます。宇宙飛行士や航空機に乗っている人たちにとっては、注意が必要になります。\n　また、人工衛星に搭載されている機器を壊すことがあります。私たちが、スマホやカーナビでどこにいるのかを知ることができるのは人工衛星のおかげなので、困ったことになりますね。このほか、送電施設を故障させ停電を起こします。１９８９年には大規模な太陽フレアのために、カナダで約９時間におよぶ大停電が起き、６００万人が影響を受けました。\n　そこで、情報通信研究機構（ＮＩＣＴ）は、２４時間体制で太陽の状況などを監視し、電力、航空、通信の会社などに情報を提供しています。総務省の検討会は、警報発令など注意を呼びかける基準づくりを進めていて、６月下旬に報告書をまとめました。検討会のメンバーで、宇宙天気予報を研究しているＮＩＣＴの石井守先生は「天気予報での台風と同じように、太陽の異変に気づき対策を取れば被害を減らすことができます。いつ、どこに、どんな影響が出るのか、予測精度を高める努力をしています」と話しています。`]
    const sentencearea = document.querySelector("#sentencearea");
    const nextsentence = document.querySelector("#nextsentence")
    const typearea = document.querySelector("#typearea");
    const progress = document.querySelector("#progress");
    const wordsarea = document.querySelector("#wordsarea");
    const wordsmode = document.querySelector("#wordsmode")
    const longwordmode = document.querySelector("#longwordmode")
    const countdown = document.querySelector("#countdown")
    const timerseconds = document.querySelector("#seconds")
    if(new URL(location.href).searchParams.get("word")){
      wordsarea.value = store_words[Number(new URL(location.href).searchParams.get("word"))]
    }else{
      wordsarea.value = `社説：日本経済の再生　次世代担う人への投資を\n　国力低下の表れではないか。昨年の歴史的な円安と物価高は国民生活や企業活動を直撃し、日本経済のもろさを浮き彫りにした。\n　ウクライナ危機に伴うエネルギー価格の高騰で、輸入額が急拡大した。一方「メード・イン・ジャパン」の売り物は乏しく、貿易赤字は過去最大に膨らんでいる。経済政策や産業のあり方を根本から問い直す時期に来ている。\n　バブル経済の崩壊以降、日本は長らく低成長とデフレにあえいできた。「失われた２０年」にどう対応すべきか。鳴り物入りで登場したのがアベノミクスだった。\n　２０１２年末の政権交代後、当時の安倍晋三首相は「最大かつ喫緊の課題は経済の再生」と訴えた。大胆な金融政策、機動的な財政政策、民間投資を喚起する成長戦略という「三本の矢」で経済を立て直す考えを表明した。\n　中核となったのが、市場に大量のマネーを流し込む異次元の金融緩和だ。日銀の黒田東彦総裁は「２年程度で２％の物価安定目標を達成できる」と豪語した。\n　円安と株高を演出し、グローバル企業の業績を押し上げたのは確かだ。しかし、企業は稼いだ利益で内部留保を積み上げ、成長を求めて海外への投資に力を注いだ。\n　産業空洞化の流れは止まらず、経済の好循環は実現していない。とりわけ問題なのは、恩恵が大企業や富裕層などに偏り、幅広い働き手に及んでいない点だ。\n　賃金は伸び悩み、非正規労働者は増え続けた。企業は２０００万人を超える非正規を、雇用の調整弁にしている。\n　異次元の緩和が、財政規律を失わせていることも見逃せない。\n　新型コロナウイルスの感染拡大を受け、政府は景気対策を繰り返し、国債発行額は、２０年度に１００兆円を超えた。超低金利で、利払い費が抑えられてきたことが背景にある。防衛費も大幅に増額し、異次元の財政悪化を招いている。\n　もはやアベノミクスの限界は明らかだ。金融政策を見直し、財政運営を正常化すべきだ。そのうえで、日本経済を支える新たな産業の創出を急ぐ必要がある。\n　求められるのは、地球規模の課題に取り組み、ライフスタイルを変えるような事業への挑戦だ。\n　ソニーグループは、ホンダと組み、環境車として本命視される電気自動車の開発に乗り出した。２５年に最初の車を発売する。\n　合弁会社の社長には、ゲーム機や犬型ロボット、携帯電話などの開発に携わってきた人材を起用した。音楽や映像、センサーなど多分野の技術を結集し、「移動空間をエンターテインメントの空間にする」ことを目指す。\n　一方、１１年に東京で設立された新興企業のＴＢＭは、日本でも豊富な資源量を誇る石灰石を原料に、紙やプラスチックの代替素材を、開発・製造している。\n　森林破壊が懸念される木材パルプを使わず、石油由来のプラスチック使用量も減らせる。石灰石が持つ可能性に着目した創業者が、大手製紙会社元役員の協力を得て、新素材の開発にこぎつけた。\n　１万社以上が、名刺や会社説明の冊子、レジ袋、食品容器などに採用している。「サステナビリティー（持続可能性）革命を実現する」という目標に共感し、大企業の出身者らが入社している。\n　企業のイノベーションに詳しい早稲田大の清水洋教授は「経営資源が豊富な既存企業が新たなビジネスに参入する一方、研究開発型のスタートアップを増やすことが重要になる」と強調する。\n　成功のカギを握るのは、人材を確保しやすい環境の整備だ。清水教授は「自発的な労働移動を増やせるかがポイント」と指摘する。\n　成長分野で働く人を増やすため、岸田文雄首相はリスキリング（学び直し）に５年間で１兆円の支援をすると表明しているが、実効性が問われる。\n　企業は新事業で活躍する人材を育てる。政府は個々人の学び直しを直接支援し、働きがいがあって待遇の良い仕事を選べるようにする。離職せずに自分の技能を試す副業や兼業も普及させていく。\n　実行する際には「人件費はコスト」という考え方から脱却し、「人材は貴重な経営資源」との認識を広めていくことが不可欠だ。\n　人材重視の経営で新たな分野にチャレンジする機運を高め、産業構造の転換を図る。それこそが日本の未来を切り開く道だ。\n毎日新聞　２０２３年１月１０日\n余録：「継がれゆくもの」と題された催しの案内が届いた…\n　「継がれゆくもの」と題された催しの案内が届いた。エッセイストの鮫島純子さんと、孫で起業家の弘子さんによる二人展。純子さんは、９月に百寿を迎え、新刊を出すなど「人生１００年時代」の先頭を軽やかに歩いている▲健康長寿のひけつは「感謝すること、好奇心を持つこと、年齢を考えないこと」という。手縫いのワンピースの胸元に、小粒の真珠をあしらったブローチが輝いていた。語り継ぎたい物語がある▲大正時代、世界で初めて真珠の養殖技術を確立した御木本幸吉が、欧州の宝石商から「模造品」と言いがかりをつけられた。裁判で真正性を証明したものの、訴訟費用が巨額で窮地に陥る。手を差し伸べたのは、実業家の渋沢栄一だった▲そのお礼にと後日、渋沢家の女たちが銀座の本店に招かれた。食事に出されたアコヤガイのフライの中に潜んでいた小さな真珠を集め、ブローチとして娘に残したのは純子さんの母親だ。「不ぞろいですけれど、大切な祖父の思い出です」。純子さんは栄一の孫にあたる▲やしゃごの弘子さんも、食肉加工の後捨てられる上質な羊の皮を使い、バッグのブランドを立ち上げて１０年になる。エチオピアで職人を育成し、縫製まで手がけることで現地経済にも貢献できる▲二人が受け継いだのは、ものを粗末にしない「質素倹約」の生き方であり、栄一が生涯追い求めた「論語と算盤」の精神だろう。その血を受け継ぐことはできなくても、次世代に渡せるものは何かと思いを巡らせてみる。\n毎日新聞　２０２２年１１月２８日\n`
    }
    allwords=wordsarea.value.split(RegExp(`\\n{${1+longwordmode.checked},}`)).filter(e=>Boolean(e))
    typedchars = 0
    typedlines = 0
    wastingtime = Number(localStorage.getItem("wastingtime") ? localStorage.getItem("wastingtime") : 0)
    function reset(){
      wordtotype = "";
      multilineword = []
      nextword = ""
      typearea.value=""
      started = false
      starttime = 0
      endtime = 0
      typedchars = 0
      typedlines = 0
      typedwords = 0
      seconds = Number(timerseconds.value)
      countdown.innerText = `残り ${seconds} 秒`
      changeprogress()
      changeword()
      clearTimeout(timer)
      timer = 0
      try{clearInterval(countdowntimer)}catch{}
    }

    function changeprogress(){
      progress.innerText = `${typedchars} 文字, ${typedlines}行, ${typedwords}ワード, 浪費した時間 約 ${Math.round(wastingtime)} 秒\n最高スコア ${localStorage.getItem(`highscore${seconds}`) ? localStorage.getItem(`highscore${seconds}`) : 0} 文字`
    }
    function changeword(){
      changeprogress()
      multilineword.push(...allwords[Math.floor(allwords.length * Math.random())].split("\n"))
      wordtotype = multilineword[0]
      if(!multilineword[1]){
        multilineword.push(...allwords[Math.floor(allwords.length * Math.random())].split("\n"))
      }
      nextword = multilineword[1]
      multilineword = multilineword.slice(1)
      sentencearea.innerText = wordtotype
      nextsentence.innerHTML = "<b>次: </b>"+nextword
      typearea.value = "";
      typearea.style["background-color"] = "rgb(0, 0, 0)"
    }
    function updatestorage(){
      
      localStorage.setItem(`highscore${seconds}`, (typedchars) >= Number(localStorage.getItem(`highscore${seconds}`)) ? (typedchars) : 0)
      localStorage.setItem("wastingtime", wastingtime)
    }
    wordsarea.addEventListener("input", (e)=>{
      allwords=wordsarea.value.split("\n".repeat(1+longwordmode.checked)).filter(e=>Boolean(e));reset();
    })

    window.onload = ()=>{
      reset()
    }

    typearea.addEventListener("input", (e)=>{
      if(!started && typearea.value){
        started = true
        starttime = Date.now()
        if(!wordsmode.checked){endtime = starttime + 1000*seconds;timer = setTimeout(
          ()=>{
            if(typearea.value){
              try{
                typedchars += wordtotype.match(new RegExp("(\\"+typearea.value.split("").join(")?(\\")+")?", "g")).join("").length
              }catch{}
            }
            try{clearInterval(countdowntimer)}catch{}
            alert(`${typedchars} 文字, ${typedlines} 行, ${typedwords}ワード`);console.log(`${typedchars} 文字, ${typedlines} 行, ${typedwords}ワード`);document.title = `${typedchars} 文字 - 実用入力練習`
            updatestorage()
            reset()
          }, endtime - starttime
        )
        countdowntimer = setInterval(
          ()=>{
            if(timer){countdown.innerText = `残り ${Math.floor((endtime - Date.now()) / 1000)} 秒`}
          }, 100
        )
      }

      }
      if((e.inputType === "insertLineBreak" || (e.inputType === "insertText" && (!e.data || e.data ===  "\n")))){
        if(typearea.value.replace("\n", "") === wordtotype){
          typedchars += typearea.value.length
          typedlines++
          if(!multilineword[1]){typedwords++}
          if(!timer && wordsmode.checked && typedwords === until_words){
            endtime = Date.now()
            alert(`${(endtime - starttime) / 1000}秒\n${typedchars / ((endtime - starttime) / 1000)}文字/秒\n${typedchars / ((endtime - starttime) / 1000)*60}文字/分`);console.log(`${(endtime - starttime) / 1000}秒\n${typedchars / ((Date.now() - starttime) / 1000)}/秒, ${until_words}`);document.title = `${typedchars / ((endtime - starttime) / 1000)}文字/秒 - 実用入力練習`
            updatestorage()
            reset()
          }else{
            changeword()
          }
          
        }//else{typedchars += typearea.value.match(new RegExp(`(\\${wordtotype.split("").join(")?(\\")})?`, "g")).join("").length}
        
      }if(wordtotype.startsWith(typearea.value) && typearea.value){
        typearea.style["background-color"] = "rgb(0, 100, 0)"

      }else if(!wordtotype.startsWith(typearea.value) && typearea.value){
        typearea.style["background-color"] = "rgb(100, 0, 0)"

      }else{
        typearea.style["background-color"] = "rgb(0, 0, 0)"
      }
    })

    typearea.addEventListener("keydown", (e)=>{
      if(e.key === "Escape"){
        wastingtime += endtime ? (seconds - ((endtime - Date.now()) / 1000)) : 0

        reset()
        try{
          clearTimeout(timer)
        }catch(e){}
      }
    })
  </script>

</body>
</html>
